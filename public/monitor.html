<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monitor</title>
</head>
<body>
  <h1>Monitor</h1>
  <script>
    const socket = new WebSocket('ws://localhost:8000?name=' + encodeURIComponent("MONITOR"));

    // When the WebSocket connection is opened
    socket.addEventListener('open', function (event) {
        console.log('WebSocket connection opened');
        // Send a message to the server to identify as the monitor
        socket.send('MONITOR');
    });

    // When a message is received from the server
    socket.addEventListener('message', function (event) {
        console.log('Message from server:', event.data);
    });

    // When the WebSocket connection is closed
    socket.addEventListener('close', function (event) {
        console.log('Disconnected from WebSocket server');
        // Attempt to reconnect after 3 seconds
        setTimeout(function() {
            console.log('Attempting to reconnect...');
            location.reload(); // Reload the page to establish a new WebSocket connection
        }, 3000);
    });

  </script>
</body>
</html>
